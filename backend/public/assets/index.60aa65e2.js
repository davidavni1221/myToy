var Z=Object.defineProperty;var G=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var j=(t,e,n)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,J=(t,e)=>{for(var n in e||(e={}))ee.call(e,n)&&j(t,n,e[n]);if(G)for(var n of G(e))te.call(e,n)&&j(t,n,e[n]);return t};import{_ as h,r as f,o as l,c as a,a as s,b as p,w as v,d as g,F as T,e as S,f as E,u as se,t as _,n as P,g as oe,h as w,i as U,j as W,k as x,v as k,l as ne,C as re,m as le,D as ie,P as ae,p as ce,q as ue,s as de,x as pe,y as me,z as _e,A as fe,B as ye}from"./vendor.d7a3cf99.js";const he=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};he();const ge={},ve={class:"main-header flex items-center justify-between"},be=s("div",{class:"logo"},[s("h2",{class:"uppercase"},[g("Toy"),s("span",{class:"clr-teal"},"App")])],-1),we={class:"flex gap-2 fw-bold"},$e=g("Home"),xe=g("Toy"),ke=g("Dashboard"),Te=g("About"),Se=g("Login"),Ce=g("User"),Ue=g("Reviews");function De(t,e){const n=f("router-link");return l(),a("header",ve,[be,s("nav",we,[p(n,{class:"link",to:"/"},{default:v(()=>[$e]),_:1}),p(n,{class:"link",to:"/toy"},{default:v(()=>[xe]),_:1}),p(n,{class:"link",to:"/dashboard"},{default:v(()=>[ke]),_:1}),p(n,{class:"link",to:"/about"},{default:v(()=>[Te]),_:1}),p(n,{class:"link",to:"/login"},{default:v(()=>[Se]),_:1}),p(n,{class:"link",to:"/user"},{default:v(()=>[Ce]),_:1}),p(n,{class:"link",to:"/review"},{default:v(()=>[Ue]),_:1})])])}var Ee=h(ge,[["render",De]]);const Ae={},Re={class:"main-footer text-center"},Be=s("p",null,"\xA9 Coffeerights 2022",-1),Ie=[Be];function Oe(t,e){return l(),a("footer",Re,Ie)}var Le=h(Ae,[["render",Oe]]);const Pe={name:"app",created(){this.$store.dispatch({type:"loadToys"})},components:{appHeader:Ee,appFooter:Le}},Fe={class:"app-container container flex flex-col"};function Ve(t,e,n,c,o,r){const d=f("app-header"),u=f("router-view"),m=f("app-footer");return l(),a("section",Fe,[p(d),p(u,{class:"flex-1"}),p(m)])}var Me=h(Pe,[["render",Ve]]),Ne="/assets/toy.d3a330c4.svg";const ze={},Ge={class:"home flex flex-col gap-2 items-center justify-center"},je=s("div",{class:"img"},[s("img",{src:Ne,alt:""})],-1),Je={class:"info text-center flex flex-col gap-3 items-star"},qe=s("div",null,[s("h1",null,"Welcome to my toy shop"),s("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit.")],-1);function He(t,e,n,c,o,r){return l(),a("section",Ge,[je,s("div",Je,[qe,s("button",{onClick:e[0]||(e[0]=d=>t.$router.push("/toy")),class:"btn btn-info"},"explore now")])])}var Ke=h(ze,[["render",He]]);const We={name:"about",data(){return{center:{lat:32.0853,lng:34.781769},markers:[{position:{lat:32.0853,lng:34.781769}},{position:{lat:31.768318,lng:35.213711}},{position:{lat:29.557669,lng:34.951923}}]}},methods:{panToBranch(t){this.center=t}}},Ye={class:"about flex flex-col gap-2 py-2"},Qe=s("h1",{class:"clr-teal uppercase py-2"},"Our Branches",-1),Xe={class:"btn-group"};function Ze(t,e,n,c,o,r){const d=f("GMapMarker"),u=f("GMapCluster"),m=f("GMapMap");return l(),a("section",Ye,[Qe,p(m,{center:o.center,zoom:8,"map-type-id":"terrain"},{default:v(()=>[p(u,null,{default:v(()=>[(l(!0),a(T,null,S(o.markers,(i,y)=>(l(),E(d,{key:y,position:i.position,clickable:!0,draggable:!0,onClick:I=>o.center=i.position},null,8,["position","onClick"]))),128))]),_:1})]),_:1},8,["center"]),s("div",Xe,[s("button",{onClick:e[0]||(e[0]=i=>r.panToBranch({lat:32.0853,lng:34.781769})),class:"btn btn-info"}," Tel Aviv "),s("button",{onClick:e[1]||(e[1]=i=>r.panToBranch({lat:31.768318,lng:35.213711})),class:"btn btn-info"}," Jerusalem "),s("button",{onClick:e[2]||(e[2]=i=>r.panToBranch({lat:29.557669,lng:34.951923})),class:"btn btn-info"}," Eilat ")])])}var et=h(We,[["render",Ze]]);const b={makeId:tt,debounce:nt,getRandomInt:Y,getRandomColor:ot,getLoremIpsum:st,loadFromStorage:rt,saveToStorage:lt,loadFromSessionStorage:it,saveToSessionStorage:at};function tt(t=5){var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let c=0;c<t;c++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}function Y(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function st(t=5){const e=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"];let n="";for(;t>0;)n+=e[Y(0,e.length-1)]+" ",t--;return n.trim()}function ot(){for(var t="#",e=0;e<6;e++)t+=Math.floor(Math.random()*10);return t}function nt(t,e){let n;return function(...o){const r=()=>{clearTimeout(n),t(...o)};clearTimeout(n),n=setTimeout(r,e)}}function rt(t){var e=localStorage.getItem(t);return e?JSON.parse(e):null}function lt(t,e){localStorage[t]=JSON.stringify(e)}function it(t){var e=sessionStorage.getItem(t);return e?JSON.parse(e):null}function at(t,e){sessionStorage[t]=JSON.stringify(e)}const F={props:{label:String},data(){return{color:b.getRandomColor()}}},q=()=>{se(t=>({b3c50e4c:t.color}))},H=F.setup;F.setup=H?(t,e)=>(q(),H(t,e)):q;const ct=F;function ut(t,e,n,c,o,r){return l(),a("div",{class:P(["label px-2",n.label])},_(n.label),3)}var V=h(ct,[["render",ut]]);const dt={name:"toy-preview",props:{toy:Object},components:{customLabel:V}};function pt(t,e,n,c,o,r){return l(),a("section",null,[oe(t.$slots,"default")])}var Q=h(dt,[["render",pt]]);const mt={name:"toy-list",props:{toys:Array},data(){return{user:null}},components:{toyPreview:Q,CustomLabel:V},created(){this.user=this.$store.getters.user,console.log(this.user)}},_t={class:"toy-list py-1 clean-list grid gap-2"},ft=["onClick"],yt={class:"flex items-center justify-between gap-2"},ht={class:"uppercase"},gt={class:"clr-teal fw-bold"},vt=["src"],bt={class:"labels flex flex-wrap items-center gap-1"};function wt(t,e,n,c,o,r){const d=f("custom-label"),u=f("toy-preview");return l(),a("section",null,[o.user?(l(),a("button",{key:0,onClick:e[0]||(e[0]=m=>t.$router.push("/toy/edit")),class:"btn btn-secondary"},"add a new toy")):w("",!0),s("ul",_t,[(l(!0),a(T,null,S(n.toys,m=>(l(),E(u,{key:m._id,toy:m},{default:v(()=>[s("li",{onClick:i=>t.$router.push(`/toy/${m._id}`),class:"toy-preview p-2 flex flex-col gap-1"},[s("div",yt,[s("h3",ht,_(m.name),1),s("p",gt,"$"+_(m.price),1)]),m.imgUrl?(l(),a("img",{key:0,src:m.imgUrl,alt:""},null,8,vt)):w("",!0),s("div",bt,[(l(!0),a(T,null,S(m.labels,i=>(l(),E(d,{key:i,label:i},null,8,["label"]))),128))])],8,ft)]),_:2},1032,["toy"]))),128))])])}var $t=h(mt,[["render",wt]]);const xt={name:"toy-filter",data(){return{filterBy:{name:"",labels:[],inStock:"",sortBy:""},isOpen:!0,price:50}},created(){this.setFilter=b.debounce(this.setFilter,500)},computed:{labels(){return this.$store.getters.labels}},methods:{setFilter(){this.$emit("set-filter",J({},this.filterBy))}}},kt={class:"toy-filter py-2"},Tt={class:"form-control"},St=s("label",{for:"name",class:"form-label"},"Name",-1),Ct={class:"form-control flex flex-col"},Ut=s("label",{for:"stock",class:"form-label"},"In Stock",-1),Dt={class:"form-control flex flex-col"},Et=s("label",{for:"labels",class:"form-label"},"By labels",-1),At={class:"form-control flex flex-col"},Rt=s("label",{for:"sort",class:"form-label"},"Sort by",-1);function Bt(t,e,n,c,o,r){const d=f("el-input"),u=f("el-option"),m=f("el-select");return l(),a("section",kt,[s("button",{onClick:e[0]||(e[0]=i=>o.isOpen=!o.isOpen),class:"btn btn-info"},_(o.isOpen?"Close":"Open")+" options ",1),o.isOpen?(l(),a("form",{key:0,onSubmit:e[5]||(e[5]=U(()=>{},["prevent"])),class:"form items-center gap-1 py-1"},[s("div",Tt,[St,p(d,{onInput:r.setFilter,modelValue:o.filterBy.name,"onUpdate:modelValue":e[1]||(e[1]=i=>o.filterBy.name=i),id:"name",class:"w-50",size:"large",placeholder:"Search by toy name..."},null,8,["onInput","modelValue"])]),s("div",Ct,[Ut,p(m,{onChange:r.setFilter,modelValue:o.filterBy.inStock,"onUpdate:modelValue":e[2]||(e[2]=i=>o.filterBy.inStock=i),id:"stock",size:"large"},{default:v(()=>[p(u,{label:"All",value:""}),p(u,{label:"In Stock",value:"true"}),p(u,{label:"Not in stock",value:"false"})]),_:1},8,["onChange","modelValue"])]),s("div",Dt,[Et,p(m,{multiple:"",onChange:r.setFilter,modelValue:o.filterBy.labels,"onUpdate:modelValue":e[3]||(e[3]=i=>o.filterBy.labels=i),"collapse-tags":"","collapse-tags-tooltip":"",id:"labels",size:"large"},{default:v(()=>[(l(!0),a(T,null,S(r.labels,i=>(l(),E(u,{key:i,label:i,value:i},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"])]),s("div",At,[Rt,p(m,{onChange:r.setFilter,modelValue:o.filterBy.sortBy,"onUpdate:modelValue":e[4]||(e[4]=i=>o.filterBy.sortBy=i),id:"sort",size:"large"},{default:v(()=>[p(u,{label:"Time",value:"time"}),p(u,{label:"Name",value:"name"}),p(u,{label:"Price",value:"price"})]),_:1},8,["onChange","modelValue"])])],32)):w("",!0)])}var It=h(xt,[["render",Bt]]);const Ot={name:"toy-app",created(){this.$store.dispatch({type:"loadToys"})},computed:{toys(){return this.$store.getters.toysToShow}},methods:{setFilter(t){const e=JSON.parse(JSON.stringify(t));this.$store.dispatch({type:"setFilter",filterBy:e})}},components:{toyList:$t,toyFilter:It}},Lt={class:"toy-app"};function Pt(t,e,n,c,o,r){const d=f("toy-filter"),u=f("toy-list");return l(),a("section",Lt,[p(d,{onSetFilter:r.setFilter},null,8,["onSetFilter"]),p(u,{toys:r.toys},null,8,["toys"])])}var Ft=h(Ot,[["render",Pt]]);const X="/api/";console.log(X);var Vt=W.create({withCredentials:!0});const $={get(t,e){return R(t,"GET",e)},post(t,e){return R(t,"POST",e)},put(t,e){return R(t,"PUT",e)},delete(t,e){return R(t,"DELETE",e)}};async function R(t,e="GET",n=null){try{return(await Vt({url:`${X}${t}`,method:e,data:n,params:e==="GET"?n:null})).data}catch(c){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data: ${n}`),console.dir(c),c.response&&c.response.status===401&&window.location.assign("/login"),c}}const K="toys_db",Mt=["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"],A="toy",C={query:Nt,getById:zt,remove:Gt,save:jt,getEmptyToy:Jt,getlabels:qt};Ht();async function Nt(t={}){return await $.get(A,t)}async function zt(t){return await $.get(`${A}/${t}`)}async function Gt(t){return await $.delete(`${A}/${t}`)}async function jt(t){return t._id?await $.put(`${A}/${t._id}`,t):await $.post(A,t)}function Jt(){return Promise.resolve({name:"",price:0,labels:[],createdAt:new Date,inStock:!0,imgUrl:null})}function qt(){return Mt}function Ht(){let t=b.loadFromStorage(K);return(!t||!t.length)&&(t=[O("Doll",150,["On wheels","Doll"]),O("Truck",80,["Outdoor","Baby"]),O("Cards",150,["Puzzle","Art"])],b.saveToStorage(K,t)),t}function O(t,e,n,c){return{_id:b.makeId(),name:t,price:e,labels:n,inStock:!0,createdAt:new Date,reviews:[{_id:b.makeId(),txt:b.getLoremIpsum(5),createdAt:new Date},{_id:b.makeId(),txt:b.getLoremIpsum(5),createdAt:new Date},{_id:b.makeId(),txt:b.getLoremIpsum(5),createdAt:new Date}]}}const M="review",B={query:Kt,addReview:Wt,removeReview:Yt,getEmptyReview:Qt};async function Kt(t){return await $.get(M,t)}async function Wt(t){return await $.post(M,t)}async function Yt(t){return await $.delete(`${M}/${t}`,t)}function Qt(){return Promise.resolve({userId:"",toyId:"",content:"",rate:0})}const Xt={components:{toyPreview:Q,CustomLabel:V},name:"toy-detail",data(){return{toy:null,reviewToAdd:null}},async created(){const{id:t}=this.$route.params;this.toy=await C.getById(t);const e=this.$store.getters.user;console.log(e),await this.$store.dispatch({type:"getReviews",filterBy:{toyId:this.toy._id}}),e&&(this.reviewToAdd=await B.getEmptyReview(),this.reviewToAdd.userId=e._id,this.reviewToAdd.toyId=this.toy._id)},computed:{user(){return this.$store.getters.user},reviews(){return this.$store.getters.reviews}},methods:{removeToy(){this.$store.dispatch({type:"removeToy",toyId:this.toy._id}).then(()=>{this.$router.push("/toy")})},async addReview(){!this.reviewToAdd.content||(await this.$store.dispatch({type:"addReview",review:this.reviewToAdd}),await this.$store.dispatch({type:"getReviews",filterBy:{toyId:this.toy._id}}))},async removeReview(t){await this.$store.dispatch({type:"removeReview",reviewId:t}),await this.$store.dispatch({type:"getReviews",filterBy:{toyId:this.toy._id}})}}},Zt={key:0,class:"toy-detalis"},es={class:"py-3 flex flex-col gap-1"},ts={class:"flex flex-col gap-1"},ss={class:"uppercase"},os={class:"clr-teal fw-bold"},ns=s("span",{class:"fw-bold"},"In Stock:",-1),rs=s("span",{class:"fw-bold"},"Created At:",-1),ls={class:"labels flex flex-wrap items-center gap-1"},is=s("h2",{class:"clr-teal"},"Reviews",-1),as={class:"flex"},cs={class:"form-control my-1"},us=s("label",{for:"txt",class:"form-label fw-600"},"Your review",-1),ds={class:"form-control my-1"},ps=s("label",{for:"rate",class:"form-label"},"Rate",-1),ms=["src"],_s=s("button",{class:"btn btn-info"},"Add Review",-1),fs={key:1,class:"my-1 flex flex-col gap-1"},ys={class:"fw-600"},hs=["onClick"],gs={key:2,class:"p-2 flex flex-col gap-1"},vs=s("h4",null,"No reviews yet.",-1),bs=s("p",null,"Be the first...",-1),ws=[vs,bs],$s={key:3,class:"btn-group gap-1"};function xs(t,e,n,c,o,r){var m,i;const d=f("custom-label"),u=f("toy-preview");return o.toy?(l(),a("section",Zt,[p(u,{toy:o.toy},{default:v(()=>[s("section",es,[s("div",ts,[s("h3",ss,_(o.toy.name),1),s("p",os,"Price: $"+_(o.toy.price),1),s("p",null,[ns,g(" "+_(o.toy.inStock),1)]),s("p",null,[rs,g(" "+_(t.$filters.formatTime(o.toy.createdAt)),1)])]),s("div",ls,[(l(!0),a(T,null,S(o.toy.labels,y=>(l(),E(d,{key:y,label:y},null,8,["label"]))),128))])])]),_:1},8,["toy"]),is,o.reviewToAdd&&r.user?(l(),a("form",{key:0,onSubmit:e[2]||(e[2]=U((...y)=>r.addReview&&r.addReview(...y),["prevent"])),class:"form"},[s("div",as,[s("div",cs,[us,x(s("textarea",{name:"txt",id:"txt",rows:"3",class:"form-input","onUpdate:modelValue":e[0]||(e[0]=y=>o.reviewToAdd.content=y),required:""},null,512),[[k,o.reviewToAdd.content]]),s("div",ds,[ps,x(s("input",{id:"rate",type:"number",class:"form-input rate",min:"0",max:"5","onUpdate:modelValue":e[1]||(e[1]=y=>o.reviewToAdd.rate=y)},null,512),[[k,o.reviewToAdd.rate,void 0,{number:!0}]])])]),s("div",null,[o.toy.imgUrl?(l(),a("img",{key:0,class:"img-details",src:o.toy.imgUrl,alt:""},null,8,ms)):w("",!0)])]),_s],32)):w("",!0),(m=r.reviews)!=null&&m.length?(l(),a("div",fs,[(l(!0),a(T,null,S(r.reviews,y=>{var I,z;return l(),a("article",{class:"review flex flex-col gap-1 items-start p-3",key:y._id},[s("p",ys,_(y.content),1),s("p",null,"Rate: "+_(y.rate)+"\u2B50",1),s("p",null,"By: "+_((I=y.user)==null?void 0:I.username),1),(z=r.user)!=null&&z.isAdmin?(l(),a("button",{key:0,class:"btn btn-danger",onClick:nn=>r.removeReview(y._id)}," Delete review ",8,hs)):w("",!0)])}),128))])):(l(),a("div",gs,ws)),(i=r.user)!=null&&i.isAdmin?(l(),a("div",$s,[s("button",{onClick:e[3]||(e[3]=y=>t.$router.push(`/toy/edit/${o.toy._id}`)),class:"btn btn-primary"}," edit toy "),s("button",{onClick:e[4]||(e[4]=(...y)=>r.removeToy&&r.removeToy(...y)),class:"btn btn-danger"},"delete toy"),s("button",{onClick:e[5]||(e[5]=y=>t.$router.push("/toy")),class:"btn btn-secondary"},"go back")])):w("",!0)])):w("",!0)}var ks=h(Xt,[["render",xs]]);const Ts={},Ss={color:"#262626",height:"200",role:"img",viewBox:"0 0 97.6 77.3",width:"250"},Cs=s("path",{d:"M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z",fill:"currentColor"},null,-1),Us=s("path",{d:"M84.7 18.4L58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5l-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z",fill:"currentColor"},null,-1),Ds=s("path",{d:"M78.2 41.6L61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6l-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z",fill:"currentColor"},null,-1),Es=[Cs,Us,Ds];function As(t,e){return l(),a("svg",Ss,Es)}var Rs=h(Ts,[["render",As]]);const Bs=async t=>{const e="davidmay_22",c="https://api.cloudinary.com/v1_1/davidmay22/image/upload",o=new FormData;o.append("file",t),o.append("upload_preset",e);try{return(await W.post(c,o)).data}catch(r){console.error("ERROR!",r)}};var Is="/assets/loader.278b8e0b.gif";const Os={name:"toy-edit",components:{uploadIcon:Rs},data(){return{toyToEdit:null,pageTitle:"Add Toy",isLoading:!1,isDragOver:!1}},created(){const{id:t}=this.$route.params;t?(C.getById(t).then(e=>this.toyToEdit=e),this.pageTitle="Edit Toy"):(C.getEmptyToy().then(e=>this.toyToEdit=e),this.pageTitle="Add Toy")},computed:{labels(){return this.$store.getters.labels}},methods:{handleFile(t){var e;t.type==="change"?e=t.target.files[0]:t.type==="drop"&&(e=t.dataTransfer.files[0]),this.onUploadFile(e)},async onUploadFile(t){this.isLoading=!0;const e=await Bs(t);this.isLoading=!1,this.isDragOver=!1,this.toyToEdit.imgUrl=e.url},saveToy(){const t=this.toyToEdit.name,e=t.charAt(0).toUpperCase()+t.slice(1);console.log(e),this.toyToEdit.name=e,this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}).then(()=>{this.$router.push("/toy")})}}},Ls={key:0,class:"toy-edit py-2"},Ps={class:"py-2"},Fs={class:"form-control"},Vs=s("label",{for:"name",class:"form-label"},"Name",-1),Ms={class:"form-control"},Ns=s("label",{for:"price",class:"form-label"},"Price",-1),zs={class:"form-control flex flex-col"},Gs=s("label",{for:"labels",class:"form-label"},"Labels",-1),js={class:"form-control flex"},Js=s("label",{for:"stock",class:"form-label"},"In Stock",-1),qs={class:"btn-group"},Hs=s("button",{type:"submit",class:"btn btn-success"},"save",-1),Ks={key:0,class:"hover"},Ws=s("p",null,"Click here to select from computer, or drag any",-1),Ys={key:1,src:Is,alt:""},Qs={key:1,class:"img-edit"},Xs=["src"];function Zs(t,e,n,c,o,r){const d=f("el-option"),u=f("el-select"),m=f("uploadIcon");return o.toyToEdit?(l(),a("section",Ls,[s("h1",Ps,_(o.pageTitle),1),s("form",{onSubmit:e[10]||(e[10]=U((...i)=>r.saveToy&&r.saveToy(...i),["prevent"])),class:"form"},[s("div",Fs,[Vs,x(s("input",{id:"name",type:"text",class:"form-input","onUpdate:modelValue":e[0]||(e[0]=i=>o.toyToEdit.name=i)},null,512),[[k,o.toyToEdit.name]])]),s("div",Ms,[Ns,x(s("input",{id:"price",type:"text",class:"form-input","onUpdate:modelValue":e[1]||(e[1]=i=>o.toyToEdit.price=i)},null,512),[[k,o.toyToEdit.price,void 0,{number:!0}]])]),s("div",zs,[Gs,p(u,{multiple:"",modelValue:o.toyToEdit.labels,"onUpdate:modelValue":e[2]||(e[2]=i=>o.toyToEdit.labels=i),"collapse-tags-tooltip":"",id:"labels",size:"large"},{default:v(()=>[(l(!0),a(T,null,S(r.labels,i=>(l(),E(d,{key:i,value:i,label:i},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),s("div",js,[Js,x(s("input",{id:"stock",type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=i=>o.toyToEdit.inStock=i)},null,512),[[ne,o.toyToEdit.inStock]])]),s("div",qs,[Hs,s("button",{onClick:e[4]||(e[4]=i=>t.$router.push("/toy")),class:"btn btn-danger-text"},"go back")]),this.toyToEdit.imgUrl?(l(),a("section",Qs,[s("img",{src:o.toyToEdit.imgUrl,alt:""},null,8,Xs),s("button",{class:"btn btn-danger",onClick:e[9]||(e[9]=i=>o.toyToEdit.imgUrl=null)},"discard")])):(l(),a("section",{key:0,onDragover:e[6]||(e[6]=U(i=>o.isDragOver=!0,["prevent"])),onDragleave:e[7]||(e[7]=i=>o.isDragOver=!1),class:P({drag:o.isDragOver}),onDrop:e[8]||(e[8]=U((...i)=>r.handleFile&&r.handleFile(...i),["prevent"]))},[o.isLoading?(l(),a("img",Ys)):(l(),a("label",Ks,[p(m,{class:P({drag:o.isDragOver})},null,8,["class"]),Ws,s("input",{type:"file",onChange:e[5]||(e[5]=(...i)=>r.handleFile&&r.handleFile(...i)),hidden:""},null,32)]))],34))],32)])):w("",!0)}var eo=h(Os,[["render",Zs]]);re.register(...le);const to={name:"dashboard",data(){return{dataDoughnut:[],dataPie:[],labelsPie:[]}},created(){this.getPrices(),this.getPrecentage()},computed:{testDataDoughnut(){return{labels:this.$store.getters.labels,datasets:[{data:[...this.dataDoughnut],backgroundColor:["#f87171","#fbbf24","#34d399","#2dd4bf","#60a5fa","#818cf8","#f472b6"]}]}},testDataPie(){return{labels:[...this.labelsPie],datasets:[{data:[...this.dataPie],backgroundColor:["#f87171","#fbbf24","#34d399","#2dd4bf","#60a5fa","#818cf8","#f472b6"]}]}},options(){return{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Prices by labels"}}}}},methods:{getPrices(){const t=this.$store.getters.labels,e=this.$store.getters.toys;t.forEach(n=>{let c=e.reduce((o,r)=>(r.labels.includes(n)&&(o+=r.price),o),0);this.dataDoughnut.push(c)})},getPrecentage(){const t=this.$store.getters.toys,e={};t.forEach(n=>{n.labels.forEach(c=>{e[c]=e[c]?e[c]+1:1})});for(const n in e)this.labelsPie.push(n),this.dataPie.push(e[n]/t.length*100)}},components:{DoughnutChart:ie,PieChart:ae}},so={class:"dashboard py-2"};function oo(t,e,n,c,o,r){const d=f("DoughnutChart"),u=f("PieChart");return l(),a("section",so,[s("div",null,[p(d,{chartData:r.testDataDoughnut,options:r.options},null,8,["chartData","options"])]),s("div",null,[p(u,{chartData:r.testDataPie,options:r.options},null,8,["chartData","options"])])])}var no=h(to,[["render",oo]]);const ro={name:"login",data(){return{isSignup:!1,newUser:{fullname:"",username:"",password:""}}},computed:{user(){return this.$store.getters.user}},methods:{async login(){await this.$store.dispatch({type:"login",cred:this.newUser}),this.$router.push("/")},async signup(){await this.$store.dispatch({type:"signup",cred:this.newUser}),this.$router.push("/")},async logout(){await this.$store.dispatch({type:"logout"})}}},lo={key:0,class:"login-page flex items-center justify-center"},io=s("div",{class:"text-center my-2"},[s("h2",{class:"clr-teal"},"Hello Again!"),s("p",null,"Lorem ipsum dolor sit amet consectetur.")],-1),ao={class:"form-control"},co=s("label",{for:"username",class:"form-label fw-600"},"Username",-1),uo={class:"form-control"},po=s("label",{for:"password",class:"form-label fw-600"},"Password",-1),mo=s("div",{class:"btn-group"},[s("button",{type:"submit",class:"btn btn-primary"},"Login")],-1),_o=s("div",{class:"text-center my-2"},[s("h2",{class:"clr-teal"},"We happy to see you here!"),s("p",null,"Lorem ipsum dolor sit amet consectetur.")],-1),fo={class:"form-control"},yo=s("label",{for:"fullname",class:"form-label fw-600"},"Fullname",-1),ho={class:"form-control"},go=s("label",{for:"username",class:"form-label fw-600"},"Username",-1),vo={class:"form-control"},bo=s("label",{for:"password",class:"form-label fw-600"},"Password",-1),wo=s("div",{class:"btn-group"},[s("button",{type:"submit",class:"btn btn-primary"},"Sign In")],-1),$o={key:1,class:"flex flex-col gap-1 items-center justify-center"},xo=g(" Hello "),ko={class:"fw-600 clr-teal captilize"};function To(t,e,n,c,o,r){const d=ce("focus");return r.user?(l(),a("section",$o,[s("h2",null,[xo,s("span",ko,_(r.user.fullname),1)]),s("button",{onClick:e[9]||(e[9]=(...u)=>r.logout&&r.logout(...u)),class:"btn btn-danger"},"logout")])):(l(),a("section",lo,[o.isSignup?w("",!0):(l(),a("form",{key:0,onSubmit:e[3]||(e[3]=U((...u)=>r.login&&r.login(...u),["prevent"])),class:"login form px-3 py-2"},[io,s("div",ao,[co,x(s("input",{id:"username",type:"text",class:"form-input",placeholder:"Enter you username","onUpdate:modelValue":e[0]||(e[0]=u=>o.newUser.username=u),autocomplete:"off"},null,512),[[k,o.newUser.username]])]),s("div",uo,[po,x(s("input",{id:"password",type:"password",class:"form-input","onUpdate:modelValue":e[1]||(e[1]=u=>o.newUser.password=u),placeholder:"Enter your password"},null,512),[[k,o.newUser.password]])]),mo,s("button",{onClick:e[2]||(e[2]=u=>o.isSignup=!o.isSignup),class:"my-1 btn btn-info-text"}," Don't have an account? Sign up now! ")],32)),o.isSignup?(l(),a("form",{key:1,onSubmit:e[8]||(e[8]=U((...u)=>r.signup&&r.signup(...u),["prevent"])),class:"signup form px-3 py-2"},[_o,s("div",fo,[yo,x(s("input",{id:"fullname",type:"text",class:"form-input",placeholder:"Enter your fullname","onUpdate:modelValue":e[4]||(e[4]=u=>o.newUser.fullname=u),autocomplete:"off"},null,512),[[k,o.newUser.fullname],[d]])]),s("div",ho,[go,x(s("input",{id:"username",type:"text",class:"form-input",placeholder:"Enter you username","onUpdate:modelValue":e[5]||(e[5]=u=>o.newUser.username=u),autocomplete:"off"},null,512),[[k,o.newUser.username]])]),s("div",vo,[bo,x(s("input",{id:"password",type:"password",class:"form-input","onUpdate:modelValue":e[6]||(e[6]=u=>o.newUser.password=u),placeholder:"Enter your password"},null,512),[[k,o.newUser.password]])]),wo,s("button",{onClick:e[7]||(e[7]=u=>o.isSignup=!o.isSignup),class:"my-1 btn btn-info-text"}," Already have an account? Login now! ")],32)):w("",!0)]))}var So=h(ro,[["render",To]]);const Co={name:"user-details",data(){return{userReviews:null}},async created(){var e;const t=(e=this.$store.getters.user)==null?void 0:e._id;t&&(this.userReviews=await this.$store.dispatch({type:"getReviews",filterBy:{userId:t}}))},computed:{user(){return console.log("hi"),this.$store.getters.user}}},Uo={key:0,class:"flex flex-col gap-1 my-2"},Do=g(" Reviews by "),Eo={class:"clr-teal"},Ao=g(" by "),Ro={class:"clr-teal"},Bo=g(" about "),Io={class:"clr-teal"},Oo={key:1,class:"text-center my-5 flex flex-col gap-2"},Lo=s("h2",null,"Login first to see your reviews",-1);function Po(t,e,n,c,o,r){return r.user&&o.userReviews?(l(),a("section",Uo,[s("h2",null,[Do,s("span",Eo,_(r.user.fullname),1)]),(l(!0),a(T,null,S(o.userReviews,d=>(l(),a("article",{class:"review p-2",key:d._id},[s("h1",null,[Ao,s("span",Ro,_(d.user.username),1),Bo,s("span",Io,_(d.toy.name),1)]),s("p",null,_(d.content),1),s("p",null,_(d.rate)+"\u2B50",1)]))),128))])):(l(),a("section",Oo,[Lo,s("button",{onClick:e[0]||(e[0]=d=>t.$router.push("/login")),class:"btn btn-primary-text"}," go to login page ")]))}var Fo=h(Co,[["render",Po]]);const Vo={name:"reviews-explore",data(){return{reviews:null}},async created(){this.reviews=await this.$store.dispatch({type:"getReviews"})}},Mo={key:0,class:"flex flex-col gap-1 my-2"},No=s("h2",null,"All Reviews",-1),zo=g(" by "),Go={class:"clr-teal"},jo=g(" about "),Jo={class:"clr-teal"};function qo(t,e,n,c,o,r){return o.reviews?(l(),a("section",Mo,[No,(l(!0),a(T,null,S(o.reviews,d=>(l(),a("article",{class:"review p-2",key:d._id},[s("h1",null,[zo,s("span",Go,_(d.user.username),1),jo,s("span",Jo,_(d.toy.name),1)]),s("p",null,_(d.content),1),s("p",null,_(d.rate)+"\u2B50",1)]))),128))])):w("",!0)}var Ho=h(Vo,[["render",qo]]);const Ko=ue({history:de(),linkActiveClass:"active",routes:[{path:"/",name:"home",component:Ke},{path:"/toy",name:"toy",component:Ft},{path:"/toy/:id",name:"toy-details",component:ks},{path:"/toy/edit/:id?",name:"toy-edit",component:eo},{path:"/dashboard",name:"dashboard",component:no},{path:"/about",name:"about",component:et},{path:"/login",name:"login",component:So},{path:"/user",name:"user",component:Fo},{path:"/review",name:"review",component:Ho}]});var Wo={state:{toys:[],filterBy:{name:"",inStock:"",labels:[],sortBy:""},labels:C.getlabels()},getters:{toys({toys:t}){return t},toysToShow({toys:t,filterBy:e}){return JSON.parse(JSON.stringify(t))},labels({labels:t}){return t}},mutations:{setToys(t,{toys:e}){t.toys=e},saveToy(t,{toy:e}){const n=t.toys.findIndex(c=>c._id===e._id);n!==-1?t.toys.splice(n,1,e):t.toys.push(e)},removeToy(t,{toyId:e}){const n=t.toys.findIndex(c=>c._id===e);t.toys.splice(n,1)},setFilter(t,{filterBy:e}){t.filterBy=e},setSort(t,{sortBy:e}){t.sortBy=e}},actions:{loadToys({commit:t,state:e}){C.query(e.filterBy).then(n=>{t({type:"setToys",toys:n})})},saveToy({commit:t},{toy:e}){C.save(e).then(n=>{t({type:"saveToy",toy:n})})},removeToy({commit:t},{toyId:e}){C.remove(e).then(()=>{t({type:"removeToy",toyId:e})})},setFilter({dispatch:t,commit:e},{filterBy:n}){e({type:"setFilter",filterBy:n}),t({type:"loadToys"})}}};const N="auth",L={login:Yo,signup:Qo,logout:Xo,getGuestUser:Zo};async function Yo(t){return await $.post(N+"/login",t)}async function Qo(t){return await $.post(N+"/signup",t)}async function Xo(){return await $.post(N+"/logout")}function Zo(){return{fullname:"Guest User",username:"guest",password:"guest",isAdmin:!0}}var en={state:{loggedinUser:b.loadFromSessionStorage("user")||null},getters:{user(t){return t.loggedinUser}},mutations:{setUser(t,{user:e}){t.loggedinUser=e}},actions:{async login({commit:t},{cred:e}){try{const n=await L.login(e);t({type:"setUser",user:n}),b.saveToSessionStorage("user",n)}catch(n){console.log(n)}},async signup({commit:t},{cred:e}){try{const n=await L.signup(e);t({type:"setUser",user:n}),b.saveToSessionStorage("user",n)}catch(n){console.log(n)}},async logout({commit:t}){try{await L.logout(),t({type:"setUser",user:null}),sessionStorage.removeItem("user")}catch(e){console.log(e)}}}},tn={state:{reviews:null},getters:{reviews(t){return t.reviews}},mutations:{setReviews(t,{reviews:e}){t.reviews=e},addReview(t,{review:e}){t.reviews.push(e)},removeReview(t,{reviewId:e}){const n=t.reviews.findIndex(c=>c._id===e);t.reviews.splice(n,1)}},actions:{async getReviews({commit:t},{filterBy:e}){try{const n=await B.query(e);return t({type:"setReviews",reviews:n}),n}catch(n){console.log("err :>> ",n)}},async addReview({commit:t},{review:e}){try{const n=await B.addReview(e);t({type:"addReview",review:n})}catch(n){console.log("err :>> ",n)}},async removeReview({commit:t},{reviewId:e}){try{await B.removeReview(e),t({type:"removeReview",reviewId:e})}catch(n){console.log("err :>> ",n)}}}};const sn=pe({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:Wo,userStore:en,reviewStore:tn}}),on={mounted(t){t.focus()}};const D=me(Me);D.config.globalProperties.$filters={formatTime(t){return _e(new Date(t),new Date)}};D.directive("focus",on);D.use(fe,{load:{key:"AIzaSyCCw7udchhbe1ycD5KUE-vB3DUbOi1gnoY"}});D.use(ye);D.use(Ko);D.use(sn);D.mount("#app");
